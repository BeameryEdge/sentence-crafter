!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React")):"function"==typeof define&&define.amd?define(["React"],t):"object"==typeof exports?exports.SentenceCrafter=t(require("React")):e.SentenceCrafter=t(e.React)}(this,function(e){return webpackJsonpSentenceCrafter([0],[function(e,t,n){var o=n(3);"string"==typeof o&&(o=[[e.i,o,""]]);n(5)(o,{});o.locals&&(e.exports=o.locals)},function(t,n){t.exports=e},function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Sentence",function(){return f}),n.d(t,"SelectSwitchCase",function(){return d});var c=n(1),a=(n.n(c),n(0)),l=(n.n(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}()),u={verticalAlign:"super",fontSize:"smaller",margin:"0 -0.05em 0 0.05em",animation:"sentence-crafter-blinker 1s ease-in-out infinite"},p=function(e){var t=void 0,n=void 0,o=void 0,i=e.onValueChange||function(e){return e},r=e.options||[],s=function(){t&&n&&o&&t.options[t.selectedIndex]&&(o.innerText=t.options[t.selectedIndex].text,t.style.width=n.getBoundingClientRect().width+"px")};return c.createElement("span",null,c.createElement("select",{className:"sentence-crafter-input sentence-crafter-select sentence-crafter-input-hidden",ref:function(e){n=e,s()}},c.createElement("option",{ref:function(e){o=e,s()}})),c.createElement("select",{className:"sentence-crafter-input sentence-crafter-select",id:e.id,value:e.value||"",style:e.value?{}:u,name:e.name,ref:function(e){t=e,s()},onChange:function(e){i(e.target.value)}},c.createElement("option",{className:"sentence-crafter-option",value:"",disabled:e.required},e.placeholder||"â–¾"),r.map(function(e){var t=e.id,n=e.value;return c.createElement("option",{className:"sentence-crafter-option",key:t,value:t},n)})))},f=function(e){function t(e){i(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.parseSelectConfig=function(e){return function(t,o,i){var r=t.selections,s=t.components;if("function"==typeof o){var c=o(r,e);return c&&s.push(c),{selections:r,components:s}}var a=o.id,l=o.getOptions,u=o.getConfigs,p=(o.required,o.list),f=o.listContinuationCondition,d=e+"."+a;if(u){var h=u(r,e);if(h)if(p){var m=r[a];r[a]=[];for(var v,b=0,g=!0;g;b++){var v=h.reduce(n.parseSelectConfig(d+"."+b),{selections:m&&m[b]||{},components:s});r[a].push(v.selections),g=f(v.selections)}}else{var y=h.reduce(n.parseSelectConfig(d),{selections:r[a]||{},components:s});r[a]=y.selections}}else if(l)if(p){r[a]=[];for(var S,C=0,O=!0;O;C++)S=n.processOptions(d+"."+C,{selections:r,components:s},o),console.log("selection",d+"."+C,S),S&&r[a].push(S),O=S&&!!S.id}else r[a]=n.processOptions(d,{selections:r,components:s},o)||r[a],console.log("[setSelection]",d,r[a]);return{selections:r,components:s}}},n.state={choices:n.props.choices||{},selections:{},components:[]},n}return s(t,e),l(t,[{key:"componentWillMount",value:function(){this.updateSelections()}},{key:"processOptions",value:function(e,t,n){var i=this,r=t.selections,s=t.components,a=(n.id,n.getOptions),l=n.required;console.log("processOptions",e,r);var u=a(r);if(u)return s.push(c.createElement(p,{required:l,key:e,onValueChange:function(t){return i.setState({choices:Object.assign({},i.state.choices,o({},e,t))},function(){i.updateSelections()})},name:e,id:e,value:this.state.choices[e],options:u})),u.find(function(t){return t.id===i.state.choices[e]})}},{key:"updateSelections",value:function(){var e=this,t=this.props,n=t.id,o=void 0===n?"":n,i=t.config,r=(t.children,i.reduce(this.parseSelectConfig(o),{selections:this.state.selections,components:[]}));console.log("[next]",r.components.length),console.log("[prev]",this.state.components.length),console.log("[next-sel]",this.state.selections),r.components.length!==this.state.components.length?this.setState(r,function(){e.updateSelections()}):this.setState(r)}},{key:"render",value:function(){return c.createElement("span",{className:"sentence-crafter"},this.state.components)}}]),t}(c.PureComponent),d=function(e){return null}},function(e,t,n){t=e.exports=n(4)(void 0),t.push([e.i,".sentence-crafter-input{background:inherit;color:inherit;display:inline-block;border:inherit;margin:0 .1em;-webkit-appearance:inherit;-webkit-border-radius:inherit;border-radius:inherit;font:inherit}.sentence-crafter-input-hidden{position:absolute;visibility:hidden}@keyframes sentence-crafter-blinker{0%{opacity:.4}50%{opacity:.6}to{opacity:.4}}",""])}],[2])});